webpackJsonp([24],{232:function(e,t,a){"use strict";function n(e){c||a(841)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(465),i=a.n(o);for(var r in o)"default"!==r&&function(e){a.d(t,e,function(){return o[e]})}(r);var d=a(843),s=(a.n(d),a(4)),c=!1,l=n,m=Object(s.a)(i.a,d.render,d.staticRenderFns,!1,l,"data-v-13db72e2",null);m.options.__file="src/views/basic_conf/wechatqrcode/wechatqrcode_index.vue",t.default=m.exports},465:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(33),i=n(o),r=a(55),d=n(r);t.default={name:"wechatqrcode_index",data:function(){return{saveLoading:!1,formItem:{wechat_qr_code:""},ruleValidate:{wechat_qr_code:[{required:!0,message:"请上传图片",trigger:"change"}]},modalSeeingImg:{wechat_qr_code:"",show:!1},visible:!1,uploadUrl:"",uploadHeader:{}}},methods:{submit:function(){var e=this,t=this;this.$refs.myForm.validate(function(a){a&&(e.saveLoading=!0,i.default.post("BasicConf/saveWechatQrCode",t.formItem).then(function(e){1===e.data.code?(t.$Message.success(e.data.msg),t.saveLoading=!1):(t.$Message.fail(e.data.msg),t.saveLoading=!1)}))})},handleView:function(){this.visible=!0},handleImgRemove:function(){this.formItem.wechat_qr_code=""},handleImgFormatError:function(e){this.$Notice.warning({title:"文件类型不合法",desc:e.name+"的文件类型不正确，请上传jpg或者png图片。"})},handleImgMaxSize:function(e){this.$Notice.warning({title:"文件大小不合法",desc:e.name+"太大啦请上传小于5M的文件。"})},handleImgSuccess:function(e){1===e.code?(this.$Message.success(e.msg),this.formItem.wechat_qr_code=e.data.fileUrl):this.$Message.error(e.msg)},init:function(){this.uploadUrl=d.default.baseUrl+"Index/upload",this.uploadHeader={ApiAuth:sessionStorage.getItem("apiAuth")};var e=this;i.default.get("BasicConf/wechatQrCode").then(function(t){1===t.data.code&&(e.formItem.wechat_qr_code=t.data.data)})}},mounted:function(){this.init()}}},841:function(e,t,a){var n=a(842);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=a(15).default;o("99da51ac",n,!1,{})},842:function(e,t,a){t=e.exports=a(14)(!1),t.push([e.i,"\n.demo-upload-list[data-v-13db72e2] {\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2);\n    margin-right: 4px;\n}\n.demo-upload-list img[data-v-13db72e2] {\n    width: 100%;\n    height: 100%;\n}\n.demo-upload-list-cover[data-v-13db72e2] {\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, .6);\n}\n.demo-upload-list:hover .demo-upload-list-cover[data-v-13db72e2] {\n    display: block;\n}\n.demo-upload-list-cover i[data-v-13db72e2] {\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n",""])},843:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-person"}}),e._v("\n            微信公众号二维码\n        ")],1),e._v(" "),a("div",[a("Form",{ref:"myForm",attrs:{rules:e.ruleValidate,model:e.formItem,"label-width":80}},[a("FormItem",{attrs:{label:"公众号二维码",prop:"wechat_qr_code"}},[e.formItem.wechat_qr_code?a("div",{staticClass:"demo-upload-list"},[a("img",{attrs:{src:e.formItem.wechat_qr_code}}),e._v(" "),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.handleView()}}}),e._v(" "),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(t){return e.handleImgRemove()}}})],1)]):e._e(),e._v(" "),e.formItem.wechat_qr_code?a("input",{directives:[{name:"model",rawName:"v-model",value:e.formItem.wechat_qr_code,expression:"formItem.wechat_qr_code"}],attrs:{type:"hidden",name:"image"},domProps:{value:e.formItem.wechat_qr_code},on:{input:function(t){t.target.composing||e.$set(e.formItem,"wechat_qr_code",t.target.value)}}}):e._e(),e._v(" "),e.formItem.wechat_qr_code?e._e():a("Upload",{staticStyle:{display:"inline-block",width:"58px"},attrs:{type:"drag",action:e.uploadUrl,headers:e.uploadHeader,format:["jpg","jpeg","png"],"max-size":5120,"on-success":e.handleImgSuccess,"on-format-error":e.handleImgFormatError,"on-exceeded-size":e.handleImgMaxSize}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),e._v(" "),a("Modal",{attrs:{title:"View Image"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:e.formItem.wechat_qr_code}}):e._e()])],1),e._v(" "),a("div",[a("Button",{staticStyle:{width:"100px","margin-left":"80px"},attrs:{type:"primary",loading:e.saveLoading},on:{click:e.submit}},[e._v("保存")])],1)],1)],1)])],1)},o=[];n._withStripped=!0,t.render=n,t.staticRenderFns=o}});